<html layout:decorate="~{layouts/layout}">
<main layout:fragment="content" class="container my-3">
    <form th:action="@{/users/create}" method="post" th:object="${userRegisterForm}"
          onsubmit="return validateForm()">
        <div class="idInput">
            <input type="text" th:field="*{username}"
                   placeholder="아이디(영문 또는 숫자 6 ~ 15글자)" class="inputs"
                   th:errorclass="error-input">
            <button id="duplicateCheckButton" type="button"
                    th:onclick="checkDuplicateUsername()" class="checkIdBtn">중복 확인</button>
            <button type="button" id="changeButton" onclick="changeusername()"
                    class="changeBtn">변경</button>
        </div>
        <div class="error" th:errors="*{username}"></div> <br>


        <input type="password" id="passwordInput" th:field="*{password}" placeholder="비밀번호(영문, 숫자 혼합 12자리 이상)" class="inputs" th:errorclass="error-input">
        <div class="error" th:errors="*{password}"></div>
        <div id="passwordFormatError" class="error" style="display: none;">비밀번호는 영문, 숫자 혼합 12자리 이상이어야 합니다.</div>
        <input type="password" th:filed="*{password2}" id="passwordConfirm" placeholder="비밀번호 확인" class="inputs">
        <div id="passwordMatchError" class="error" style="display: none;">비밀번호가 일치하지 않습니다.</div>

        <div class="idInput">
            <input type="text" th:field="*{nickname}" placeholder="닉네임"
                   class="inputs" th:errorclass="error-input">
            <button type="button" id="duplicateCheckNicknameButton" onclick="checkDuplicateNickname()" class="checkIdBtn">중복 확인</button>
            <button type="button" id="changeNicknameButton" onclick="changeNickname()" class="changeBtn">변경</button>
        </div>
        <div class="error" th:errors="*{nickname}"></div> <br>

       <div class="idInput">
           <input type="email" th:field="*{email}" placeholder="이메일" class="inputs">
           <button type="button" id="duplicateCheckEamilButton" onclick="sendEmail()" class="checkIdBtn">인증번호 전송</button>
           <button type="button" id="changeEmailButton" onclick="changeEmail()" class="changeBtn">변경</button>
       </div>
       <div id="verificationMessage"></div> <br>
       <div class="idInput">
           <input type="text" th:field="*{inputCode}" placeholder="인증번호" class="inputs">
           <button type="button" onclick="verifyCode()" class="checkIdBtn">인증확인</button>
       </div>

        <button type="submit" class="btn btn-primary">회원가입</button>
        <a href="/board/list/qna">리스트 페이지로 이동</a>
    </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/registerCheck.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/register.css">
</main>
</html>
